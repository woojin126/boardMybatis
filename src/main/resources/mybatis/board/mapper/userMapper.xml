<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.board.mapper.UserMapper">
    <select id="boardList" resultType="mybatis.board.domain.UserVO">
        SELECT  id,
                title,
                content,
                author,
                regdate,
                recnt
        FROM (
                 SELECT id,
                        title,
                        content,
                        author,
                        regdate,
                        recnt,
                        ROW_NUMBER() OVER(ORDER BY id DESC) AS RNUM
                 FROM board) MP
        WHERE RNUM BETWEEN #{rowStart} AND #{rowEnd}
        ORDER BY id DESC


    </select>
    <select id="listCount" resultType="int">
        SELECT count(id) FROM board where id > 0
    </select>

    <insert id="insertBoard">
        INSERT INTO board(id,
                          author,
                          title,
                          content

                          )
                          VALUES (
                         board_sequence.nextval,
                         #{author},
                         #{title},
                         #{content}


            )
    </insert>
    <select id="findByItem" resultType="mybatis.board.domain.UserVO">
        SELECT * FROM board where id=#{id}
    </select>

    <update id="updateViewCnt">
        UPDATE board set recnt = recnt + 1 where id=#{id}
    </update>
</mapper>

